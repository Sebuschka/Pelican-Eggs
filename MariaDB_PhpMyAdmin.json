{
  "_comment": "MariaDB + phpMyAdmin combined Pterodactyl Egg",
  "meta": {
    "version": "PTDL_v1",
    "update_url": null
  },
  "export": {
    "server": [],
    "files": []
  },
  "name": "MariaDB + phpMyAdmin",
  "author": "chatgpt-generated",
  "description": "Runs MariaDB (latest) and phpMyAdmin (latest) together inside the same container.",
  "features": null,
  "docker_images": {
    "MariaDB + phpMyAdmin": "ubuntu:latest"
  },
  "file_denylist": [],
  "startup": "bash start.sh",
  "config": {
    "files": {},
    "startup": "{RUN_STARTUP}",
    "logs": "logs/latest.log",
    "stop": "kill -15 $(cat mdb.pid); kill -15 $(cat pma.pid)"
  },
  "scripts": {
    "installation": {
      "script": "#!/bin/bash\napt update\napt install -y mariadb-server php apache2 php-mysql wget unzip pwgen\n\n# ---- Configure MariaDB ----\nservice mysql stop\nsed -i \"s/bind-address.*/bind-address = 0.0.0.0/\" /etc/mysql/mariadb.conf.d/50-server.cnf\nMYSQL_ROOT_PASSWORD=$(pwgen -s 16 1)\nmysql -e \"ALTER USER 'root'@'localhost' IDENTIFIED BY '${MYSQL_ROOT_PASSWORD}'; FLUSH PRIVILEGES;\"\necho \"root:${MYSQL_ROOT_PASSWORD}\" > /mnt/server/db_credentials.txt\n\n# ---- Install phpMyAdmin ----\nwget https://www.phpmyadmin.net/downloads/phpMyAdmin-latest-all-languages.zip\nunzip phpMyAdmin-*-all-languages.zip\nmv phpMyAdmin-* /usr/share/phpmyadmin\ncp /usr/share/phpmyadmin/config.sample.inc.php /usr/share/phpmyadmin/config.inc.php\nmkdir /usr/share/phpmyadmin/tmp\nchmod 777 /usr/share/phpmyadmin/tmp\n\n# Apache config for phpMyAdmin\necho \"Alias /phpmyadmin /usr/share/phpmyadmin\" > /etc/apache2/conf-available/phpmyadmin.conf\na2enconf phpmyadmin\na2enmod php\n\n# ---- Create startup script ----\ncat << 'EOF' > /mnt/server/start.sh\n#!/bin/bash\n\n# Start MariaDB\nmysqld_safe --pid-file=$(pwd)/mdb.pid --datadir=/var/lib/mysql &\n\n# Start Apache (phpMyAdmin)\napachectl -D FOREGROUND & echo $! > pma.pid\n\n# Wait forever\nwhile true; do sleep 1; done\nEOF\nchmod +x /mnt/server/start.sh\n\n# Write details\nmkdir -p /mnt/server/logs\necho \"Installation complete\" > /mnt/server/logs/latest.log",
      "container": "ubuntu:latest",
      "entrypoint": "bash"
    }
  },
  "variables": []
}
